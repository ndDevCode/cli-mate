"use strict";(self.webpackChunkcli_mate=self.webpackChunkcli_mate||[]).push([[960],{960:(H,g,O)=>{O.r(g),O.d(g,{Bubbler:()=>q});var D=O(1528),u=O(3776),M=O(2243);function k(m,b,e,l){return b>=e?(0,u.qk)(m+(b-e)*l,m,b):b<e?(0,u.qk)(m-(e-b)*l,b,m):void 0}const p="bubble";class q extends u.Ef{constructor(b){super(b),this._clickBubble=()=>{const e=this.container,o=e.interactivity.mouse.clickPosition,n=e.actualOptions.interactivity.modes.bubble;if(!n||!o)return;e.bubble||(e.bubble={});const t=e.retina.bubbleModeDistance;if(!t||t<0)return;const s=e.particles.quadTree.queryCircle(o,t,i=>this.isEnabled(i)),{bubble:a}=e;for(const i of s){if(!a.clicking)continue;i.bubble.inRange=!a.durationEnd;const c=i.getPosition(),f=(0,u.c$)(c,o),d=((new Date).getTime()-(e.interactivity.mouse.clickTime??0))/u.Ub;d>n.duration&&(a.durationEnd=!0),d>2*n.duration&&(a.clicking=!1,a.durationEnd=!1);const v={bubbleObj:{optValue:e.retina.bubbleModeSize,value:i.bubble.radius},particlesObj:{optValue:(0,u.GO)(i.options.size.value)*e.retina.pixelRatio,value:i.size.value},type:"size"};this._process(i,f,d,v);const h={bubbleObj:{optValue:n.opacity,value:i.bubble.opacity},particlesObj:{optValue:(0,u.GO)(i.options.opacity.value),value:i.opacity?.value??1},type:"opacity"};this._process(i,f,d,h),!a.durationEnd&&f<=t?this._hoverBubbleColor(i,f):delete i.bubble.color}},this._hoverBubble=()=>{const e=this.container,l=e.interactivity.mouse.position,o=e.retina.bubbleModeDistance;if(!o||o<0||!l)return;const n=e.particles.quadTree.queryCircle(l,o,t=>this.isEnabled(t));for(const t of n){t.bubble.inRange=!0;const s=t.getPosition(),a=(0,u.c$)(s,l),i=1-a/o;a<=o?i>=0&&e.interactivity.status===u.yG&&(this._hoverBubbleSize(t,i),this._hoverBubbleOpacity(t,i),this._hoverBubbleColor(t,i)):this.reset(t),e.interactivity.status===u.EJ&&this.reset(t)}},this._hoverBubbleColor=(e,l,o)=>{const t=o??this.container.actualOptions.interactivity.modes.bubble;if(t){if(!e.bubble.finalColor){const s=t.color;if(!s)return;const a=(0,u.pd)(s);e.bubble.finalColor=(0,u.cl)(a)}if(e.bubble.finalColor)if(t.mix){e.bubble.color=void 0;const s=e.getFillColor();e.bubble.color=s?(0,u.wv)((0,u.EP)(s,e.bubble.finalColor,1-l,l)):e.bubble.finalColor}else e.bubble.color=e.bubble.finalColor}},this._hoverBubbleOpacity=(e,l,o)=>{const t=this.container.actualOptions,s=o?.opacity??t.interactivity.modes.bubble?.opacity;if(!s)return;const a=e.options.opacity.value,c=k(e.opacity?.value??1,s,(0,u.GO)(a),l);void 0!==c&&(e.bubble.opacity=c)},this._hoverBubbleSize=(e,l,o)=>{const n=this.container,t=o?.size?o.size*n.retina.pixelRatio:n.retina.bubbleModeSize;if(void 0===t)return;const s=(0,u.GO)(e.options.size.value)*n.retina.pixelRatio,i=k(e.size.value,t,s,l);void 0!==i&&(e.bubble.radius=i)},this._process=(e,l,o,n)=>{const t=this.container,s=n.bubbleObj.optValue,i=t.actualOptions.interactivity.modes.bubble;if(!i||void 0===s)return;const c=i.duration,f=t.retina.bubbleModeDistance,v=n.bubbleObj.value,h=n.particlesObj.value??0,r=n.type;if(f&&!(f<0)&&s!==n.particlesObj.optValue)if(t.bubble||(t.bubble={}),t.bubble.durationEnd)v&&("size"===r&&delete e.bubble.radius,"opacity"===r&&delete e.bubble.opacity);else if(l<=f){if((v??h)!==s){const y=h-o*(h-s)/c;"size"===r&&(e.bubble.radius=y),"opacity"===r&&(e.bubble.opacity=y)}}else"size"===r&&delete e.bubble.radius,"opacity"===r&&delete e.bubble.opacity},this._singleSelectorHover=(e,l,o)=>{const n=this.container,t=document.querySelectorAll(l),s=n.actualOptions.interactivity.modes.bubble;!s||!t.length||t.forEach(a=>{const i=a,c=n.retina.pixelRatio,f={x:(i.offsetLeft+.5*i.offsetWidth)*c,y:(i.offsetTop+.5*i.offsetHeight)*c},v="circle"===o.type?new u.um(f.x,f.y,.5*i.offsetWidth*c):new u.Yt(i.offsetLeft*c,i.offsetTop*c,i.offsetWidth*c,i.offsetHeight*c),h=n.particles.quadTree.query(v,r=>this.isEnabled(r));for(const r of h){if(!v.contains(r.getPosition()))continue;r.bubble.inRange=!0;const y=(0,u.UL)(s.divs,i);(!r.bubble.div||r.bubble.div!==i)&&(this.clear(r,e,!0),r.bubble.div=i),this._hoverBubbleSize(r,1,y),this._hoverBubbleOpacity(r,1,y),this._hoverBubbleColor(r,1,y)}})},b.bubble||(b.bubble={}),this.handleClickMode=e=>{e===p&&(b.bubble||(b.bubble={}),b.bubble.clicking=!0)}}clear(b,e,l){b.bubble.inRange&&!l||(delete b.bubble.div,delete b.bubble.opacity,delete b.bubble.radius,delete b.bubble.color)}init(){const b=this.container,e=b.actualOptions.interactivity.modes.bubble;e&&(b.retina.bubbleModeDistance=e.distance*b.retina.pixelRatio,void 0!==e.size&&(b.retina.bubbleModeSize=e.size*b.retina.pixelRatio))}interact(b){var e=this;return(0,D.c)(function*(){const o=e.container.actualOptions.interactivity.events,n=o.onHover,t=o.onClick,i=t.enable,c=t.mode,f=o.onDiv;n.enable&&(0,u.Sc)(p,n.mode)?e._hoverBubble():i&&(0,u.Sc)(p,c)?e._clickBubble():(0,u.g$)(p,f,(d,v)=>e._singleSelectorHover(b,d,v)),yield Promise.resolve()})()}isEnabled(b){const e=this.container,l=e.actualOptions,o=e.interactivity.mouse,n=(b?.interactivity??l.interactivity).events,{onClick:t,onDiv:s,onHover:a}=n,i=(0,u.CY)(p,s);return!!(i||a.enable&&o.position||t.enable&&o.clickPosition)&&((0,u.Sc)(p,a.mode)||(0,u.Sc)(p,t.mode)||i)}loadModeOptions(b,...e){b.bubble||(b.bubble=new M.u);for(const l of e)b.bubble.load(l?.bubble)}reset(b){b.bubble.inRange=!1}}}}]);