"use strict";(self.webpackChunkcli_mate=self.webpackChunkcli_mate||[]).push([[1804],{1804:(E,q,C)=>{C.r(q),C.d(q,{LinkInstance:()=>W});var T=C(1528),r=C(3776);function v(c,e){const n=function S(c){return c.sort((e,n)=>e-n),c.join("_")}(c.map(s=>s.id));let i=e.get(n);return void 0===i&&(i=(0,r.CE)(),e.set(n,i)),i}class W{constructor(e){this.container=e,this._drawLinkLine=(n,i)=>{const s=n.options.links;if(!s?.enable)return;const t=this.container,o=t.actualOptions,a=i.destination,k=n.getPosition(),g=a.getPosition();let w=i.opacity;t.canvas.draw(h=>{let f;const l=n.options.twinkle?.lines;if(l?.enable){const d=l.frequency,y=(0,r.Af)(l.color);(0,r.CE)()<d&&y&&(f=y,w=(0,r.qS)(l.opacity))}if(!f){const d=void 0!==s.id?t.particles.linksColors.get(s.id):t.particles.linksColor;f=(0,r.MF)(n,a,d)}if(!f)return;const u=n.retina.linksWidth??0,b=n.retina.linksDistance??0,{backgroundMask:p}=o;!function D(c){let e=!1;const{begin:n,end:i,maxDistance:s,context:t,canvasSize:o,width:a,backgroundMask:k,colorLine:g,opacity:w,links:h}=c;if((0,r.c$)(n,i)<=s)(0,r.Cw)(t,n,i),e=!0;else if(h.warp){let l,u;const p=(0,r.If)(n,{x:i.x-o.width,y:i.y});if(p.distance<=s){const d=n.y-p.dy/p.dx*n.x;l={x:0,y:d},u={x:o.width,y:d}}else{const y=(0,r.If)(n,{x:i.x,y:i.y-o.height});if(y.distance<=s){const x=-(n.y-y.dy/y.dx*n.x)/(y.dy/y.dx);l={x,y:0},u={x,y:o.height}}else{const x=(0,r.If)(n,{x:i.x-o.width,y:i.y-o.height});if(x.distance<=s){const P=n.y-x.dy/x.dx*n.x;l={x:-P/(x.dy/x.dx),y:P},u={x:l.x+o.width,y:l.y+o.height}}}}l&&u&&((0,r.Cw)(t,n,l),(0,r.Cw)(t,i,u),e=!0)}if(!e)return;t.lineWidth=a,k.enable&&(t.globalCompositeOperation=k.composite),t.strokeStyle=(0,r.a2)(g,w);const{shadow:f}=h;if(f.enable){const l=(0,r.Af)(f.color);l&&(t.shadowBlur=f.blur,t.shadowColor=(0,r.a2)(l))}t.stroke()}({context:h,width:u,begin:k,end:g,maxDistance:b,canvasSize:t.canvas.size,links:s,backgroundMask:p,colorLine:f,opacity:w})})},this._drawLinkTriangle=(n,i,s)=>{const t=n.options.links;if(!t?.enable)return;const o=t.triangles;if(!o.enable)return;const a=this.container,k=a.actualOptions,g=i.destination,w=s.destination,h=o.opacity??.5*(i.opacity+s.opacity);h<=0||a.canvas.draw(f=>{const l=n.getPosition(),u=g.getPosition(),b=w.getPosition(),p=n.retina.linksDistance??0;if((0,r.c$)(l,u)>p||(0,r.c$)(b,u)>p||(0,r.c$)(b,l)>p)return;let d=(0,r.Af)(o.color);if(!d){const y=void 0!==t.id?a.particles.linksColors.get(t.id):a.particles.linksColor;d=(0,r.MF)(n,g,y)}d&&function O(c){const{context:e,pos1:n,pos2:i,pos3:s,backgroundMask:t,colorTriangle:o,opacityTriangle:a}=c;(function _(c,e,n,i){c.beginPath(),c.moveTo(e.x,e.y),c.lineTo(n.x,n.y),c.lineTo(i.x,i.y),c.closePath()})(e,n,i,s),t.enable&&(e.globalCompositeOperation=t.composite),e.fillStyle=(0,r.a2)(o,a),e.fill()}({context:f,pos1:l,pos2:u,pos3:b,backgroundMask:k.backgroundMask,colorTriangle:d,opacityTriangle:h})})},this._drawTriangles=(n,i,s,t)=>{const o=s.destination;if(!n.links?.triangles.enable||!o.options.links?.triangles.enable)return;const a=o.links?.filter(k=>{const g=this._getLinkFrequency(o,k.destination);return o.options.links&&g<=o.options.links.frequency&&t.findIndex(h=>h.destination===k.destination)>=0});if(a?.length)for(const k of a)this._getTriangleFrequency(i,o,k.destination)>n.links.triangles.frequency||this._drawLinkTriangle(i,s,k)},this._getLinkFrequency=(n,i)=>v([n,i],this._freqs.links),this._getTriangleFrequency=(n,i,s)=>v([n,i,s],this._freqs.triangles),this._freqs={links:new Map,triangles:new Map}}drawParticle(e,n){var i=this;return(0,T.c)(function*(){const{links:s,options:t}=n;if(!s?.length)return;const o=s.filter(a=>t.links&&i._getLinkFrequency(n,a.destination)<=t.links.frequency);for(const a of o)i._drawTriangles(t,n,a,o),a.opacity>0&&(n.retina.linksWidth??0)>0&&i._drawLinkLine(n,a);yield Promise.resolve()})()}init(){var e=this;return(0,T.c)(function*(){e._freqs.links=new Map,e._freqs.triangles=new Map,yield Promise.resolve()})()}particleCreated(e){if(e.links=[],!e.options.links)return;const n=this.container.retina.pixelRatio,{retina:i}=e,{distance:s,width:t}=e.options.links;i.linksDistance=s*n,i.linksWidth=t*n}particleDestroyed(e){e.links=[]}}}}]);